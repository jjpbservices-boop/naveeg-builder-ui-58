(()=>{var e={};e.id=535,e.ids=[535],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8233:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>b,originalPathname:()=>u,pages:()=>d,routeModule:()=>g,tree:()=>c}),s(8501),s(1055),s(3973);var a=s(551),r=s(5328),n=s(8736),i=s.n(n),o=s(894),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["design",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8501)),"/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/design/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1055)),"/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,3973,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/design/page.tsx"],u="/design/page",b={require:s,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/design/page",pathname:"/design",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},300:(e,t,s)=>{let a={"7be64f446b1487bceac8564a2d982b07637b520f":()=>Promise.resolve().then(s.bind(s,5093)).then(e=>e.loadDesign),b255cb5f4a79ee19ba7d63c7bb83fedb4718c068:()=>Promise.resolve().then(s.bind(s,5093)).then(e=>e.saveDesign)};async function r(e,...t){return(await a[e]()).apply(null,t)}e.exports={"7be64f446b1487bceac8564a2d982b07637b520f":r.bind(null,"7be64f446b1487bceac8564a2d982b07637b520f"),b255cb5f4a79ee19ba7d63c7bb83fedb4718c068:r.bind(null,"b255cb5f4a79ee19ba7d63c7bb83fedb4718c068")}},1793:(e,t,s)=>{Promise.resolve().then(s.bind(s,1871))},1871:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(747),r=s(5072),n=s(8813),i=s(3733);function o({draft:e,endpoints:t}){let[s,o]=(0,r.useState)(e),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[b,g]=(0,r.useState)(null),m=async()=>{if(s){c(!0);try{if(!(await fetch(t.save,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:s.id||s.website_id,colors:s.colors,fonts:s.fonts,pages_meta:s.pages_meta})})).ok)throw Error("Failed to save")}catch(e){console.error("Failed to save:",e)}finally{c(!1)}}},p=async()=>{if(s){u(!0);try{let e=await fetch(t.preview,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:s.id||s.website_id})});if(!e.ok)throw Error("Failed to preview");let a=await e.json();a.url&&(g(a.url),window.open(a.url,"_blank"))}catch(e){console.error("Failed to preview:",e)}finally{u(!1)}}},x=async()=>{if(s)try{if(!(await fetch(t.attach,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:s.id||s.website_id})})).ok)throw Error("Failed to attach");window.location.href=`${process.env.NEXT_PUBLIC_DASHBOARD_URL}/app`}catch(e){console.error("Failed to attach to user:",e)}},h=e=>{if(!s)return;let t={section_title:`Section ${s.pages_meta[e].sections.length+1}`,section_description:"Custom section content"},a=[...s.pages_meta];a[e].sections.push(t),o({...s,pages_meta:a})},f=(e,t,a)=>{if(!s)return;let r=[...s.pages_meta];r[e]={...r[e],[t]:a},o({...s,pages_meta:r})},y=(e,t,a,r)=>{if(!s)return;let n=[...s.pages_meta];n[e].sections[t]={...n[e].sections[t],[a]:r},o({...s,pages_meta:n})},j=e=>{if(!s||s.pages_meta.length<=5)return;let t=s.pages_meta.filter((t,s)=>s!==e);o({...s,pages_meta:t})},v=(e,t)=>{if(!s||s.pages_meta[e].sections.length<=5)return;let a=[...s.pages_meta];a[e].sections=a[e].sections.filter((e,s)=>s!==t),o({...s,pages_meta:a})};return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Design Your Website"}),a.jsx("p",{className:"text-xl text-gray-600",children:"Customize colors, fonts, and structure. We pre-selected colors based on your business info. If you already have a brand palette, update your Primary and Secondary colors here."}),s.region&&(0,a.jsxs)("p",{className:"text-xs text-neutral-500 mt-2",children:["Datacenter: Frankfurt (",s.region,")"]}),s.slug&&(0,a.jsxs)("p",{className:"text-sm text-blue-600 mt-2",children:["Your website: ",(0,a.jsxs)("span",{className:"font-mono",children:[s.slug,".naveeg.com"]})]})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,a.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-xl p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Customize Design"}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Colors"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),a.jsx("input",{type:"color",value:s.colors?.primary_color||"#3B82F6",onChange:e=>o({...s,colors:{...s.colors,primary_color:e.target.value}}),className:"w-full h-12 rounded-lg border border-gray-300"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),a.jsx("input",{type:"color",value:s.colors?.secondary_color||"#8B5CF6",onChange:e=>o({...s,colors:{...s.colors,secondary_color:e.target.value}}),className:"w-full h-12 rounded-lg border border-gray-300"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Dark"}),a.jsx("input",{type:"color",value:s.colors?.background_dark||"#1F2937",onChange:e=>o({...s,colors:{...s.colors,background_dark:e.target.value}}),className:"w-full h-12 rounded-lg border border-gray-300"})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Fonts"}),(0,a.jsxs)("select",{value:s.fonts?.primary_font||"Poppins",onChange:e=>o({...s,fonts:{...s.fonts,primary_font:e.target.value}}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"Poppins",children:"Poppins"}),a.jsx("option",{value:"Inter",children:"Inter"}),a.jsx("option",{value:"Roboto",children:"Roboto"}),a.jsx("option",{value:"Open Sans",children:"Open Sans"}),a.jsx("option",{value:"Lato",children:"Lato"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("button",{onClick:m,disabled:l,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:l?"Saving...":"Save Changes"}),a.jsx("button",{onClick:p,disabled:d,className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 transition-colors",children:d?"Generating Preview...":"Preview Website"}),a.jsx("button",{onClick:x,className:"w-full bg-purple-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Sign Up & Continue"})]})]}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Website Structure"}),a.jsx("button",{onClick:()=>{if(!s)return;let e={title:`Page ${s.pages_meta.length+1}`,description:`Custom page ${s.pages_meta.length+1}`,sections:[{section_title:"Hero Section",section_description:"Main content area"},{section_title:"About Section",section_description:"Information about this page"}]};o({...s,pages_meta:[...s.pages_meta,e]})},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Page"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Always render at least 5 suggested pages with 5 sections each. You can add or remove before building."}),a.jsx("div",{className:"space-y-4",children:s.pages_meta.map((e,t)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("input",{type:"text",value:e.title,onChange:e=>f(t,"title",e.target.value),className:"text-lg font-semibold text-gray-900 bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2"}),a.jsx("button",{onClick:()=>j(t),disabled:s.pages_meta.length<=5,className:"text-red-600 hover:text-red-800 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(i.JO,{name:"trash-2",className:"w-4 h-4"})})]}),a.jsx("input",{type:"text",value:e.description,onChange:e=>f(t,"description",e.target.value),placeholder:"Page description...",className:"w-full text-sm text-gray-600 bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 mb-3"}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.sections.map((s,r)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:s.section_title,onChange:e=>y(t,r,"section_title",e.target.value),className:"flex-1 text-sm text-gray-800 bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2"}),a.jsx("button",{onClick:()=>v(t,r),disabled:e.sections.length<=5,className:"text-red-500 hover:text-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(i.JO,{name:"x",className:"w-3 h-3"})})]},r)),a.jsx("button",{onClick:()=>h(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Add Section"})]})]},t))})]})]})]})}):a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Design Not Found"}),a.jsx("p",{className:"text-gray-600",children:"Please start the onboarding process to continue."}),a.jsx("a",{href:"/start",className:"inline-block mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Start"})]})})}},3733:(e,t,s)=>{"use strict";s.d(t,{JO:()=>a.Icon});var a=s(88);s(8234),s(6201),s(7018),s(747)},5093:(e,t,s)=>{"use strict";s.r(t),s.d(t,{loadDesign:()=>o,saveDesign:()=>l});var a=s(7883);s(5819);var r=s(1869);let n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpbHBhemVnanJjcndncHVqcW5pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1NzYxNjksImV4cCI6MjA3MDE1MjE2OX0.LV5FvbQQGf0Kv-O1uA0tsS-Yam6rB1x937BgqFsJoX4";async function i(e){let t=await fetch("https://eilpazegjrcrwgpujqni.supabase.co/functions/v1/ai-router",{method:"POST",headers:{"content-type":"application/json",apikey:n,Authorization:`Bearer ${n}`,Origin:"http://localhost:4311"},body:JSON.stringify(e),cache:"no-store"});if(!t.ok){let e=await t.text().catch(()=>"");throw Error(`ai-router ${t.status}: ${e}`)}return t.json()}async function o(e){let t=await i({action:"get-draft",draft_id:e});if(!t?.ok)throw Error(t?.message??"get-draft failed");return t.data}async function l(e){let t=await i({action:"save-draft",...e});if(!t?.ok)throw Error(t?.message??"save-draft failed");return t.data}(0,r.h)([o,l]),(0,a.j)("7be64f446b1487bceac8564a2d982b07637b520f",o),(0,a.j)("b255cb5f4a79ee19ba7d63c7bb83fedb4718c068",l)},8501:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(765),r=s(9479),n=s(5093);let i=(0,s(6370).createProxy)(String.raw`/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/design/DesignEditor.tsx#default`);async function o({searchParams:e}){let t;let{draft_id:s}=e;if(!s)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Missing Draft ID"}),a.jsx("p",{className:"text-gray-600",children:"Please start the onboarding process to continue."}),a.jsx("a",{href:"/start",className:"inline-block mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Start"})]})});try{t=await (0,n.loadDesign)(s)}catch(e){return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Design Not Found"}),a.jsx("p",{className:"text-gray-600",children:"Could not load your design. Please try again."}),a.jsx("a",{href:"/start",className:"inline-block mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Start"})]})})}return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:a.jsx(r.Suspense,{fallback:a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your design..."})]})}),children:a.jsx(i,{draft:t,endpoints:{save:"/design/save",preview:"/design/preview",attach:"/design/attach"}})})})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[646,517,813,293,558,392,18],()=>s(8233));module.exports=a})();