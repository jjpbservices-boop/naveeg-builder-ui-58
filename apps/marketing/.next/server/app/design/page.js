(()=>{var e={};e.id=535,e.ids=[535],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8233:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>b,originalPathname:()=>u,pages:()=>d,routeModule:()=>g,tree:()=>c}),a(8501),a(1055),a(3973);var s=a(551),r=a(5328),n=a(8736),i=a.n(n),o=a(894),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let c=["",{children:["design",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8501)),"/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/design/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1055)),"/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,3973,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/design/page.tsx"],u="/design/page",b={require:a,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/design/page",pathname:"/design",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9652:(e,t,a)=>{let s={"5a61fa1caf70834e8dd2c24d24309daa392991b6":()=>Promise.resolve().then(a.bind(a,5093)).then(e=>e.previewSite),"7be64f446b1487bceac8564a2d982b07637b520f":()=>Promise.resolve().then(a.bind(a,5093)).then(e=>e.loadDesign),b255cb5f4a79ee19ba7d63c7bb83fedb4718c068:()=>Promise.resolve().then(a.bind(a,5093)).then(e=>e.saveDesign),e98af48294e760a7764a72158a7031a19059cd40:()=>Promise.resolve().then(a.bind(a,5093)).then(e=>e.attachToUser)};async function r(e,...t){return(await s[e]()).apply(null,t)}e.exports={"5a61fa1caf70834e8dd2c24d24309daa392991b6":r.bind(null,"5a61fa1caf70834e8dd2c24d24309daa392991b6"),"7be64f446b1487bceac8564a2d982b07637b520f":r.bind(null,"7be64f446b1487bceac8564a2d982b07637b520f"),b255cb5f4a79ee19ba7d63c7bb83fedb4718c068:r.bind(null,"b255cb5f4a79ee19ba7d63c7bb83fedb4718c068"),e98af48294e760a7764a72158a7031a19059cd40:r.bind(null,"e98af48294e760a7764a72158a7031a19059cd40")}},1793:(e,t,a)=>{Promise.resolve().then(a.bind(a,1871))},1871:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var s=a(747),r=a(5072),n=a(8813),i=a(88);function o({draft:e,endpoints:t}){let[a,o]=(0,r.useState)(e),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[b,g]=(0,r.useState)(null),h=async()=>{if(a){c(!0);try{if(!(await fetch(t.save,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:a.id||a.website_id,colors:a.colors,fonts:a.fonts,pages_meta:a.pages_meta})})).ok)throw Error("Failed to save")}catch(e){console.error("Failed to save:",e)}finally{c(!1)}}},p=async()=>{if(a){u(!0);try{let e=await fetch(t.preview,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:a.id||a.website_id})});if(!e.ok)throw Error("Failed to preview");let s=await e.json();s.url&&(g(s.url),window.open(s.url,"_blank"))}catch(e){console.error("Failed to preview:",e)}finally{u(!1)}}},m=async()=>{if(a)try{if(!(await fetch(t.attach,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:a.id||a.website_id})})).ok)throw Error("Failed to attach");window.location.href=`${process.env.NEXT_PUBLIC_DASHBOARD_URL}/app`}catch(e){console.error("Failed to attach to user:",e)}},x=e=>{if(!a)return;let t={section_title:`Section ${a.pages_meta[e].sections.length+1}`,section_description:"Custom section content"},s=[...a.pages_meta];s[e].sections.push(t),o({...a,pages_meta:s})},f=(e,t,s)=>{if(!a)return;let r=[...a.pages_meta];r[e]={...r[e],[t]:s},o({...a,pages_meta:r})},y=(e,t,s,r)=>{if(!a)return;let n=[...a.pages_meta];n[e].sections[t]={...n[e].sections[t],[s]:r},o({...a,pages_meta:n})},v=e=>{if(!a||a.pages_meta.length<=5)return;let t=a.pages_meta.filter((t,a)=>a!==e);o({...a,pages_meta:t})},j=(e,t)=>{if(!a||a.pages_meta[e].sections.length<=5)return;let s=[...a.pages_meta];s[e].sections=s[e].sections.filter((e,a)=>a!==t),o({...a,pages_meta:s})};return a?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Design Your Website"}),s.jsx("p",{className:"text-xl text-gray-600",children:"Customize colors, fonts, and structure. We pre-selected colors based on your business info. If you already have a brand palette, update your Primary and Secondary colors here."}),a.region&&(0,s.jsxs)("p",{className:"text-xs text-neutral-500 mt-2",children:["Datacenter: Frankfurt (",a.region,")"]}),a.slug&&(0,s.jsxs)("p",{className:"text-sm text-blue-600 mt-2",children:["Your website: ",(0,s.jsxs)("span",{className:"font-mono",children:[a.slug,".naveeg.com"]})]})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-xl p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Customize Design"}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Colors"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),s.jsx("input",{type:"color",value:a.colors?.primary_color||"#3B82F6",onChange:e=>o({...a,colors:{...a.colors,primary_color:e.target.value}}),className:"w-full h-12 rounded-lg border border-gray-300"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),s.jsx("input",{type:"color",value:a.colors?.secondary_color||"#8B5CF6",onChange:e=>o({...a,colors:{...a.colors,secondary_color:e.target.value}}),className:"w-full h-12 rounded-lg border border-gray-300"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Dark"}),s.jsx("input",{type:"color",value:a.colors?.background_dark||"#1F2937",onChange:e=>o({...a,colors:{...a.colors,background_dark:e.target.value}}),className:"w-full h-12 rounded-lg border border-gray-300"})]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Fonts"}),(0,s.jsxs)("select",{value:a.fonts?.primary_font||"Poppins",onChange:e=>o({...a,fonts:{...a.fonts,primary_font:e.target.value}}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"Poppins",children:"Poppins"}),s.jsx("option",{value:"Inter",children:"Inter"}),s.jsx("option",{value:"Roboto",children:"Roboto"}),s.jsx("option",{value:"Open Sans",children:"Open Sans"}),s.jsx("option",{value:"Lato",children:"Lato"})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("button",{onClick:h,disabled:l,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:l?"Saving...":"Save Changes"}),s.jsx("button",{onClick:p,disabled:d,className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 transition-colors",children:d?"Generating Preview...":"Preview Website"}),s.jsx("button",{onClick:m,className:"w-full bg-purple-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Sign Up & Continue"})]})]}),(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Website Structure"}),s.jsx("button",{onClick:()=>{if(!a)return;let e={title:`Page ${a.pages_meta.length+1}`,description:`Custom page ${a.pages_meta.length+1}`,sections:[{section_title:"Hero Section",section_description:"Main content area"},{section_title:"About Section",section_description:"Information about this page"}]};o({...a,pages_meta:[...a.pages_meta,e]})},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Page"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Always render at least 5 suggested pages with 5 sections each. You can add or remove before building."}),s.jsx("div",{className:"space-y-4",children:a.pages_meta.map((e,t)=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("input",{type:"text",value:e.title,onChange:e=>f(t,"title",e.target.value),className:"text-lg font-semibold text-gray-900 bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2"}),s.jsx("button",{onClick:()=>v(t),disabled:a.pages_meta.length<=5,className:"text-red-600 hover:text-red-800 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(i.Icon,{name:"trash-2",className:"w-4 h-4"})})]}),s.jsx("input",{type:"text",value:e.description,onChange:e=>f(t,"description",e.target.value),placeholder:"Page description...",className:"w-full text-sm text-gray-600 bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 mb-3"}),(0,s.jsxs)("div",{className:"space-y-2",children:[e.sections.map((a,r)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"text",value:a.section_title,onChange:e=>y(t,r,"section_title",e.target.value),className:"flex-1 text-sm text-gray-800 bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2"}),s.jsx("button",{onClick:()=>j(t,r),disabled:e.sections.length<=5,className:"text-red-500 hover:text-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(i.Icon,{name:"x",className:"w-3 h-3"})})]},r)),s.jsx("button",{onClick:()=>x(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Add Section"})]})]},t))})]})]})]})}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Design Not Found"}),s.jsx("p",{className:"text-gray-600",children:"Please start the onboarding process to continue."}),s.jsx("a",{href:"/start",className:"inline-block mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Start"})]})})}},88:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Icon:()=>K});var s=a(747),r=a(5072),n=a(6686),i=a(2204),o=a(7540),l=a(2134),c=a(585),d=a(1567),u=a(1447),b=a(7663),g=a(3719),h=a(3162),p=a(355),m=a(4293),x=a(5558),f=a(5878),y=a(1354),v=a(5566),j=a(5970),w=a(4294),N=a(7498),_=a(4722),k=a(9956),Z=a(8689),P=a(864),C=a(7124),S=a(5827),I=a(7608),D=a(4829),E=a(8195),O=a(7951),F=a(4471),A=a(1780),T=a(9788),J=a(1936),U=a(1679),z=a(2632),B=a(213),G=a(2159),q=a(2055),$=a(942),L=a(4374),M=a(2673),R=a(5867),W=a(436),X=a(9370),Y=a(8066);let H={home:n.Z,settings:i.Z,"credit-card":o.Z,"bar-chart-3":l.Z,"chevron-left":c.Z,"chevron-right":d.Z,"chevron-down":u.Z,crown:b.Z,"edit-3":g.Z,play:h.Z,check:p.Z,"check-circle":m.Z,"external-link":x.Z,globe:f.Z,eye:y.Z,search:v.Z,zap:j.Z,"loader-2":w.Z,bot:N.Z,building:_.Z,building2:k.Z,"building-2":k.Z,rocket:Z.Z,"trending-up":P.Z,"trending-down":C.Z,"server-cog":S.Z,"alert-circle":I.Z,"arrow-left":D.Z,"arrow-right":E.Z,download:O.Z,"log-out":F.Z,"trash-2":A.Z,x:T.Z,"panels-top-left":J.Z,globe2:U.Z,"key-round":z.Z,star:B.Z,info:G.Z,"file-text":q.Z,shield:$.Z,plus:L.Z,edit:M.Z,"more-horizontal":R.Z,"alert-triangle":W.Z,"shield-check":X.Z,layout:J.Z,"x-circle":Y.Z};function V({name:e,className:t,...a}){let r=H[e];return r?s.jsx(r,{className:t,"aria-hidden":"true",...a}):s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,"aria-hidden":"true","data-fallback":!0,...a,children:s.jsx("circle",{cx:"12",cy:"12",r:"10"})})}function K(e){let[t,a]=(0,r.useState)(!1);return t?s.jsx(V,{...e}):s.jsx("span",{className:"inline-block align-middle","aria-hidden":"true"})}},5093:(e,t,a)=>{"use strict";a.r(t),a.d(t,{attachToUser:()=>c,loadDesign:()=>o,previewSite:()=>d,saveDesign:()=>l});var s=a(7883);a(5819);var r=a(1869);let n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpbHBh";async function i(e){let t=await fetch("https://eilpazegjrcrwgpujqni.supabase.co/functions/v1/ai-router",{method:"POST",headers:{"content-type":"application/json",apikey:n,Authorization:`Bearer ${n}`,Origin:"http://localhost:4311"},body:JSON.stringify(e),cache:"no-store"});if(!t.ok){let e=await t.text().catch(()=>"");throw Error(`ai-router ${t.status}: ${e}`)}return t.json()}async function o(e){let t=await i({action:"get-draft",draft_id:e});if(!t?.ok)throw Error(t?.message??"get-draft failed");return t.data}async function l(e){let t=await i({action:"save-draft",...e});if(!t?.ok)throw Error(t?.message??"save-draft failed");return t.data}async function c(e){return{ok:!0,draft_id:e}}async function d(e){return{ok:!0,draft_id:e,preview_url:`https://preview-${e}.naveeg.online`}}(0,r.h)([o,l,c,d]),(0,s.j)("7be64f446b1487bceac8564a2d982b07637b520f",o),(0,s.j)("b255cb5f4a79ee19ba7d63c7bb83fedb4718c068",l),(0,s.j)("e98af48294e760a7764a72158a7031a19059cd40",c),(0,s.j)("5a61fa1caf70834e8dd2c24d24309daa392991b6",d)},8501:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(765),r=a(9479),n=a(5093);let i=(0,a(6370).createProxy)(String.raw`/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/design/DesignEditor.tsx#default`);async function o({searchParams:e}){let t;let{draft_id:a}=e;if(!a)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Missing Draft ID"}),s.jsx("p",{className:"text-gray-600",children:"Please start the onboarding process to continue."}),s.jsx("a",{href:"/start",className:"inline-block mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Start"})]})});try{t=await (0,n.loadDesign)(a)}catch(e){return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Design Not Found"}),s.jsx("p",{className:"text-gray-600",children:"Could not load your design. Please try again."}),s.jsx("a",{href:"/start",className:"inline-block mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Start"})]})})}return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:s.jsx(r.Suspense,{fallback:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading your design..."})]})}),children:s.jsx(i,{draft:t,endpoints:{save:"/design/save",preview:"/design/preview",attach:"/design/attach"}})})})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[646,517,813,558,526,392],()=>a(8233));module.exports=s})();