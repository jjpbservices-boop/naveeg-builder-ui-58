"use strict";(()=>{var e={};e.id=28,e.ids=[28],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9250:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>l,staticGenerationAsyncStorage:()=>f});var a={};t.r(a),t.d(a,{POST:()=>u});var n=t(4398),i=t(5328),o=t(6982),s=t(3317),d=t(5093);async function u(e){try{let{draft_id:r}=await e.json();if(!r)return s.NextResponse.json({error:"Draft ID is required"},{status:400});let t=await (0,d.previewSite)(r);return s.NextResponse.json(t??{success:!0})}catch(e){return console.error("Preview site error:",e),s.NextResponse.json({error:"Failed to generate preview"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/(onboarding)/design/preview/route",pathname:"/design/preview",filename:"route",bundlePath:"app/(onboarding)/design/preview/route"},resolvedPagePath:"/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/(onboarding)/design/preview/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:f,serverHooks:l}=c,g="/(onboarding)/design/preview/route";function h(){return(0,o.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:f})}},5093:(e,r,t)=>{t.r(r),t.d(r,{attachToUser:()=>u,loadDesign:()=>s,previewSite:()=>c,saveDesign:()=>d});var a=t(7883);t(5819);var n=t(1869);let i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpbHBh";async function o(e){let r=await fetch("https://eilpazegjrcrwgpujqni.supabase.co/functions/v1/ai-router",{method:"POST",headers:{"content-type":"application/json",apikey:i,Authorization:`Bearer ${i}`,Origin:"http://localhost:4311"},body:JSON.stringify(e),cache:"no-store"});if(!r.ok){let e=await r.text().catch(()=>"");throw Error(`ai-router ${r.status}: ${e}`)}return r.json()}async function s(e){let r=await o({action:"get-draft",draft_id:e});if(!r?.ok)throw Error(r?.message??"get-draft failed");return r.data}async function d(e){let r=await o({action:"save-draft",...e});if(!r?.ok)throw Error(r?.message??"save-draft failed");return r.data}async function u(e){return{ok:!0,draft_id:e}}async function c(e){return{ok:!0,draft_id:e,preview_url:`https://preview-${e}.naveeg.online`}}(0,n.h)([s,d,u,c]),(0,a.j)("7be64f446b1487bceac8564a2d982b07637b520f",s),(0,a.j)("b255cb5f4a79ee19ba7d63c7bb83fedb4718c068",d),(0,a.j)("e98af48294e760a7764a72158a7031a19059cd40",u),(0,a.j)("5a61fa1caf70834e8dd2c24d24309daa392991b6",c)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[646,558,955],()=>t(9250));module.exports=a})();