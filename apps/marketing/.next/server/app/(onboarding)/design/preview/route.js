"use strict";(()=>{var e={};e.id=28,e.ids=[28],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9250:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l});var a={};t.r(a),t.d(a,{POST:()=>c});var i=t(4398),n=t(5328),o=t(6982),s=t(3317),u=t(5093);async function c(e){try{let{draft_id:r}=await e.json();if(!r)return s.NextResponse.json({error:"Draft ID is required"},{status:400});let t=await (0,u.previewSite)(r);return s.NextResponse.json(t??{success:!0})}catch(e){return console.error("Preview site error:",e),s.NextResponse.json({error:"Failed to generate preview"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/(onboarding)/design/preview/route",pathname:"/design/preview",filename:"route",bundlePath:"app/(onboarding)/design/preview/route"},resolvedPagePath:"/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/(onboarding)/design/preview/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:g}=d,f="/(onboarding)/design/preview/route";function h(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}},5093:(e,r,t)=>{t.r(r),t.d(r,{loadDesign:()=>s,saveDesign:()=>u});var a=t(7883);t(5819);var i=t(1869);let n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpbHBhemVnanJjcndncHVqcW5pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1NzYxNjksImV4cCI6MjA3MDE1MjE2OX0.LV5FvbQQGf0Kv-O1uA0tsS-Yam6rB1x937BgqFsJoX4";async function o(e){let r=await fetch("https://eilpazegjrcrwgpujqni.supabase.co/functions/v1/ai-router",{method:"POST",headers:{"content-type":"application/json",apikey:n,Authorization:`Bearer ${n}`,Origin:"http://localhost:4311"},body:JSON.stringify(e),cache:"no-store"});if(!r.ok){let e=await r.text().catch(()=>"");throw Error(`ai-router ${r.status}: ${e}`)}return r.json()}async function s(e){let r=await o({action:"get-draft",draft_id:e});if(!r?.ok)throw Error(r?.message??"get-draft failed");return r.data}async function u(e){let r=await o({action:"save-draft",...e});if(!r?.ok)throw Error(r?.message??"save-draft failed");return r.data}(0,i.h)([s,u]),(0,a.j)("7be64f446b1487bceac8564a2d982b07637b520f",s),(0,a.j)("b255cb5f4a79ee19ba7d63c7bb83fedb4718c068",u)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[646,558,955],()=>t(9250));module.exports=a})();