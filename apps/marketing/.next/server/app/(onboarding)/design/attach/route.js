"use strict";(()=>{var e={};e.id=430,e.ids=[430],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1520:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>h});var a={};r.r(a),r.d(a,{POST:()=>u});var n=r(4398),o=r(5328),s=r(6982),i=r(3317),c=r(5093);async function u(e){try{let{draft_id:t}=await e.json();if(!t)return i.NextResponse.json({error:"Draft ID is required"},{status:400});let r=await (0,c.attachToUser)(t);return i.NextResponse.json(r??{success:!0})}catch(e){return console.error("Attach user error:",e),i.NextResponse.json({error:"Failed to attach user"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/(onboarding)/design/attach/route",pathname:"/design/attach",filename:"route",bundlePath:"app/(onboarding)/design/attach/route"},resolvedPagePath:"/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/(onboarding)/design/attach/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:l}=d,g="/(onboarding)/design/attach/route";function f(){return(0,s.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:h})}},5093:(e,t,r)=>{r.r(t),r.d(t,{loadDesign:()=>i,saveDesign:()=>c});var a=r(7883);r(5819);var n=r(1869);let o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpbHBhemVnanJjcndncHVqcW5pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1NzYxNjksImV4cCI6MjA3MDE1MjE2OX0.LV5FvbQQGf0Kv-O1uA0tsS-Yam6rB1x937BgqFsJoX4";async function s(e){let t=await fetch("https://eilpazegjrcrwgpujqni.supabase.co/functions/v1/ai-router",{method:"POST",headers:{"content-type":"application/json",apikey:o,Authorization:`Bearer ${o}`,Origin:"http://localhost:4311"},body:JSON.stringify(e),cache:"no-store"});if(!t.ok){let e=await t.text().catch(()=>"");throw Error(`ai-router ${t.status}: ${e}`)}return t.json()}async function i(e){let t=await s({action:"get-draft",draft_id:e});if(!t?.ok)throw Error(t?.message??"get-draft failed");return t.data}async function c(e){let t=await s({action:"save-draft",...e});if(!t?.ok)throw Error(t?.message??"save-draft failed");return t.data}(0,n.h)([i,c]),(0,a.j)("7be64f446b1487bceac8564a2d982b07637b520f",i),(0,a.j)("b255cb5f4a79ee19ba7d63c7bb83fedb4718c068",c)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[646,558,955],()=>r(1520));module.exports=a})();