"use strict";(()=>{var e={};e.id=430,e.ids=[430],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1520:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>l,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h});var r={};a.r(r),a.d(r,{POST:()=>d});var n=a(4398),o=a(5328),i=a(6982),s=a(3317),c=a(5093);async function d(e){try{let{draft_id:t}=await e.json();if(!t)return s.NextResponse.json({error:"Draft ID is required"},{status:400});let a=await (0,c.attachToUser)(t);return s.NextResponse.json(a??{success:!0})}catch(e){return console.error("Attach user error:",e),s.NextResponse.json({error:"Failed to attach user"},{status:500})}}let u=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/(onboarding)/design/attach/route",pathname:"/design/attach",filename:"route",bundlePath:"app/(onboarding)/design/attach/route"},resolvedPagePath:"/Users/jonathanbunel/naveeg-builder-ui-58/apps/marketing/src/app/(onboarding)/design/attach/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:f}=u,l="/(onboarding)/design/attach/route";function g(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}},5093:(e,t,a)=>{a.r(t),a.d(t,{attachToUser:()=>d,loadDesign:()=>s,previewSite:()=>u,saveDesign:()=>c});var r=a(7883);a(5819);var n=a(1869);let o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpbHBh";async function i(e){let t=await fetch("https://eilpazegjrcrwgpujqni.supabase.co/functions/v1/ai-router",{method:"POST",headers:{"content-type":"application/json",apikey:o,Authorization:`Bearer ${o}`,Origin:"http://localhost:4311"},body:JSON.stringify(e),cache:"no-store"});if(!t.ok){let e=await t.text().catch(()=>"");throw Error(`ai-router ${t.status}: ${e}`)}return t.json()}async function s(e){let t=await i({action:"get-draft",draft_id:e});if(!t?.ok)throw Error(t?.message??"get-draft failed");return t.data}async function c(e){let t=await i({action:"save-draft",...e});if(!t?.ok)throw Error(t?.message??"save-draft failed");return t.data}async function d(e){return{ok:!0,draft_id:e}}async function u(e){return{ok:!0,draft_id:e,preview_url:`https://preview-${e}.naveeg.online`}}(0,n.h)([s,c,d,u]),(0,r.j)("7be64f446b1487bceac8564a2d982b07637b520f",s),(0,r.j)("b255cb5f4a79ee19ba7d63c7bb83fedb4718c068",c),(0,r.j)("e98af48294e760a7764a72158a7031a19059cd40",d),(0,r.j)("5a61fa1caf70834e8dd2c24d24309daa392991b6",u)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[646,558,955],()=>a(1520));module.exports=r})();