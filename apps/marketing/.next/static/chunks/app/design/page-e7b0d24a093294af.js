(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{7856:function(e,t,n){Promise.resolve().then(n.bind(n,1431))},1431:function(e,t,n){"use strict";n.d(t,{default:function(){return l}});var s=n(5626),r=n(4087),o=n(4741),a=n(4311),i=n(5717);function l(e){var t,n,l,c;let{draft:d,endpoints:u}=e,[m,p]=(0,r.useState)(d),[h,g]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),v=async()=>{if(m){g(!0);try{if(!(await fetch(u.save,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:m.id||m.website_id,colors:m.colors,fonts:m.fonts,pages_meta:m.pages_meta})})).ok)throw Error("Failed to save")}catch(e){console.error("Failed to save:",e)}finally{g(!1)}}},j=async()=>{if(m){f(!0);try{let e=await fetch(u.preview,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:m.id||m.website_id})});if(!e.ok)throw Error("Failed to preview");let t=await e.json();t.url&&(y(t.url),window.open(t.url,"_blank"))}catch(e){console.error("Failed to preview:",e)}finally{f(!1)}}},N=async()=>{if(m)try{if(!(await fetch(u.attach,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:m.id||m.website_id})})).ok)throw Error("Failed to attach");window.location.href="".concat(i.env.NEXT_PUBLIC_DASHBOARD_URL,"/app")}catch(e){console.error("Failed to attach to user:",e)}},w=e=>{if(!m)return;let t={section_title:"Section ".concat(m.pages_meta[e].sections.length+1),section_description:"Custom section content"},n=[...m.pages_meta];n[e].sections.push(t),p({...m,pages_meta:n})},_=(e,t,n)=>{if(!m)return;let s=[...m.pages_meta];s[e]={...s[e],[t]:n},p({...m,pages_meta:s})},C=(e,t,n,s)=>{if(!m)return;let r=[...m.pages_meta];r[e].sections[t]={...r[e].sections[t],[n]:s},p({...m,pages_meta:r})},k=e=>{if(!m||m.pages_meta.length<=5)return;let t=m.pages_meta.filter((t,n)=>n!==e);p({...m,pages_meta:t})},S=(e,t)=>{if(!m||m.pages_meta[e].sections.length<=5)return;let n=[...m.pages_meta];n[e].sections=n[e].sections.filter((e,n)=>n!==t),p({...m,pages_meta:n})};return m?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Design Your Website"}),(0,s.jsx)("p",{className:"text-xl text-gray-600",children:"Customize colors, fonts, and structure. We pre-selected colors based on your business info. If you already have a brand palette, update your Primary and Secondary colors here."}),m.region&&(0,s.jsxs)("p",{className:"text-xs text-neutral-500 mt-2",children:["Datacenter: Frankfurt (",m.region,")"]}),m.slug&&(0,s.jsxs)("p",{className:"text-sm text-blue-600 mt-2",children:["Your website: ",(0,s.jsxs)("span",{className:"font-mono",children:[m.slug,".naveeg.com"]})]})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,s.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Customize Design"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Colors"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),(0,s.jsx)("input",{type:"color",value:(null===(t=m.colors)||void 0===t?void 0:t.primary_color)||"#3B82F6",onChange:e=>p({...m,colors:{...m.colors,primary_color:e.target.value}}),className:"w-full h-12 rounded-lg border border-gray-300"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),(0,s.jsx)("input",{type:"color",value:(null===(n=m.colors)||void 0===n?void 0:n.secondary_color)||"#8B5CF6",onChange:e=>p({...m,colors:{...m.colors,secondary_color:e.target.value}}),className:"w-full h-12 rounded-lg border border-gray-300"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Dark"}),(0,s.jsx)("input",{type:"color",value:(null===(l=m.colors)||void 0===l?void 0:l.background_dark)||"#1F2937",onChange:e=>p({...m,colors:{...m.colors,background_dark:e.target.value}}),className:"w-full h-12 rounded-lg border border-gray-300"})]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Fonts"}),(0,s.jsxs)("select",{value:(null===(c=m.fonts)||void 0===c?void 0:c.primary_font)||"Poppins",onChange:e=>p({...m,fonts:{...m.fonts,primary_font:e.target.value}}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"Poppins",children:"Poppins"}),(0,s.jsx)("option",{value:"Inter",children:"Inter"}),(0,s.jsx)("option",{value:"Roboto",children:"Roboto"}),(0,s.jsx)("option",{value:"Open Sans",children:"Open Sans"}),(0,s.jsx)("option",{value:"Lato",children:"Lato"})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{onClick:v,disabled:h,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:h?"Saving...":"Save Changes"}),(0,s.jsx)("button",{onClick:j,disabled:x,className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 transition-colors",children:x?"Generating Preview...":"Preview Website"}),(0,s.jsx)("button",{onClick:N,className:"w-full bg-purple-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Sign Up & Continue"})]})]}),(0,s.jsxs)(o.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Website Structure"}),(0,s.jsx)("button",{onClick:()=>{if(!m)return;let e={title:"Page ".concat(m.pages_meta.length+1),description:"Custom page ".concat(m.pages_meta.length+1),sections:[{section_title:"Hero Section",section_description:"Main content area"},{section_title:"About Section",section_description:"Information about this page"}]};p({...m,pages_meta:[...m.pages_meta,e]})},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Page"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Always render at least 5 suggested pages with 5 sections each. You can add or remove before building."}),(0,s.jsx)("div",{className:"space-y-4",children:m.pages_meta.map((e,t)=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("input",{type:"text",value:e.title,onChange:e=>_(t,"title",e.target.value),className:"text-lg font-semibold text-gray-900 bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2"}),(0,s.jsx)("button",{onClick:()=>k(t),disabled:m.pages_meta.length<=5,className:"text-red-600 hover:text-red-800 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)(a.JO,{name:"trash-2",className:"w-4 h-4"})})]}),(0,s.jsx)("input",{type:"text",value:e.description,onChange:e=>_(t,"description",e.target.value),placeholder:"Page description...",className:"w-full text-sm text-gray-600 bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 mb-3"}),(0,s.jsxs)("div",{className:"space-y-2",children:[e.sections.map((n,r)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"text",value:n.section_title,onChange:e=>C(t,r,"section_title",e.target.value),className:"flex-1 text-sm text-gray-800 bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2"}),(0,s.jsx)("button",{onClick:()=>S(t,r),disabled:e.sections.length<=5,className:"text-red-500 hover:text-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)(a.JO,{name:"x",className:"w-3 h-3"})})]},r)),(0,s.jsx)("button",{onClick:()=>w(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Add Section"})]})]},t))})]})]})]})}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Design Not Found"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Please start the onboarding process to continue."}),(0,s.jsx)("a",{href:"/start",className:"inline-block mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Start"})]})})}},5717:function(e,t,n){"use strict";var s,r;e.exports=(null==(s=n.g.process)?void 0:s.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(2913)},2913:function(e){!function(){var t={229:function(e){var t,n,s,r=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l=[],c=!1,d=-1;function u(){c&&s&&(c=!1,s.length?l=s.concat(l):d=-1,l.length&&m())}function m(){if(!c){var e=i(u);c=!0;for(var t=l.length;t;){for(s=l,l=[];++d<t;)s&&s[d].run();d=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||i(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,s),a=!1}finally{a&&delete n[e]}return o.exports}s.ab="//";var r=s(229);e.exports=r}()},4311:function(e,t,n){"use strict";n.d(t,{JO:function(){return s.Icon}});var s=n(1064);n(7391),n(5307),n(9572),n(5626)}},function(e){e.O(0,[741,706,572,849,796,744],function(){return e(e.s=7856)}),_N_E=e.O()}]);